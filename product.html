<!DOCTYPE HTML>
<html>
<head>
	<title>商品一覧</title>
</head>
<body>
	<h1>商品一覧</h1>

	<table>
	<tr>
		<th>商品名</th><th>カート</th>
	</tr>
	<tr>
		<td>カレー</td>
		<td>
			<form><button type="button" data-pid="1" class="btn-cart">カートに追加</button></from>
		</td>
	<tr/>
	<tr>
		<td>ナン</td>
		<td>
			<form><button type="button" data-pid="2" class="btn-cart">カートに追加</button></from>
		</td>
	<tr/>
	<tr>
		<td>ナッシー</td>
		<td>
			<form><button type="button" data-pid="3" class="btn-cart">カートに追加</button></from>
		</td>
	<tr/>
	</table>

	<script>
		const btnCart = document.querySelectorAll(".btn-cart");
		for(let i=0; i<btnCart. length; i++){
			btnCart[i].addEventListener("click", ()=>{
				let pid = btnCart[i].getAttribute("data-pid");
				let xhr = new XmlHttpRequest();
				xhr.open("POST", "add.php");
				xhr.onload = ()=>{
					let response = xhr.responseText;
					alert(response);
				}
				xhr.send(`pid=${pid}`);
			});
		}
	</script>
</body>